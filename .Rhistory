knitr::opts_chunk$set(echo = TRUE)
library(statsDK)
library(tidyverse)
library(readxl)
udd_landsdele_2019 <- read_excel(path='uddannelsesgrupper_landsdele_2019.xlsx')
udd_landsdele_2019 <- cbind(udd_landsdele_2019, Antal_indbyggere = rowSums(udd_landsdele_2019[,2:11]))
head(udd_landsdele_2019,11)
udd_landsdele_2019 <- udd_landsdele_2019 %>% mutate(Ingen_ungdomsuddannelse=`H10 Grundskole`, Ungdomsuddannelse=`H20 Gymnasiale uddannelser`+`H30 Erhvervsfaglige uddannelser`+`H35 Adgangsgivende uddannelsesforløb`, Kort_videregående=`H40 Korte videregående uddannelser, KVU`, Mellemlang_videregående = `H50 Mellemlange videregående uddannelser, MVU` + `H60 Bacheloruddannelser, BACH`, Lang_videregående=`H70 Lange videregående uddannelser, LVU` + `H80 Ph.d. og forskeruddannelser`, Uoplyst=`H90 Uoplyst mv.`)
udd_landsdele_2019 <- udd_landsdele_2019 %>% select(Landsdel, Ingen_ungdomsuddannelse, Ungdomsuddannelse, Kort_videregående, Mellemlang_videregående, Lang_videregående, Uoplyst, Antal_indbyggere)
head(udd_landsdele_2019,11)
udd_landsdele_prop_2019 <- udd_landsdele_2019 %>% mutate(ProportionIngen=Ingen_ungdomsuddannelse/Antal_indbyggere, ProportionUngdoms=Ungdomsuddannelse/Antal_indbyggere, ProportionKort=Kort_videregående/Antal_indbyggere, ProportionMellem= Mellemlang_videregående/Antal_indbyggere, ProportionLang=Lang_videregående/Antal_indbyggere, ProportionUoplyst=Uoplyst/Antal_indbyggere) %>% select(Landsdel, ProportionIngen, ProportionUngdoms, ProportionKort, ProportionMellem, ProportionLang, ProportionUoplyst)
head(udd_landsdele_prop_2019,11)
udd_landsdele_prop_2019 %>% rename(Uoplyst=ProportionUoplyst, Ungdomsuddannelse=ProportionUngdoms, KortVidere=ProportionKort, MellemLang=ProportionMellem, Lang = ProportionLang, Ingen=ProportionIngen) %>% pivot_longer(!Landsdel, names_to = "Uddannelse", values_to = "Proportion") %>% ggplot(mapping = aes(x = Proportion, y=Uddannelse)) + geom_bar(stat='identity', width=0.8, aes(fill=Landsdel)) + facet_wrap(~Landsdel, ncol = 3, nrow = 6) + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) + labs(title = "Uddannelse i landsdele") + theme(axis.text.y = element_text(angle = 0, vjust = 1, hjust=1)) +
theme(text = element_text(size = 8.5), element_line(size = 0.2))
udd_gns_2019 <- udd_landsdele_prop_2019 %>% mutate(gns=ProportionIngen*1+ProportionKort*2+ProportionKort*3+ProportionMellem*4+ProportionLang*5) %>% select(Landsdel, gns)
udd_gns_2019 <- udd_gns_2019[order(-udd_gns_2019$gns),]
write_rds(x = udd_gns_2019, file = 'Data/udd_gns_2019')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
barsel04_far_2019 <- barsel04_far %>% filter(TID == 2019)
barsel04_big <- read_rds("Data/barsel04.rds")
unique(barsel04_big$UDDKOMB)
barsel04_far <- barsel04_big %>% filter(TAL %in% "Far - barselsdagpengedage i gennemsnit",
ORLOV1 %in% "Alle forældrepar, uanset deling af orlov",
grepl(UDDKOMB, pattern = "Far"), #uddannelseskombinationer som kun indeholder far
grepl("Landsdel", OMRÅDE)) %>%
select(UDDKOMB, OMRÅDE, TID, INDHOLD) %>%
arrange(OMRÅDE, TID) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ",")),
TID = factor(TID))
barsel04_far
barsel04_far_2019 <- barsel04_far %>% filter(TID == 2019)
barsel04_far_2019
read_rds("Data/udd_gns_2019.rds")
getwd()
write_rds(x = udd_gns_2019, file = 'Data/udd_gns_2019.rds')
read_rds("Data/udd_gns_2019.rds")
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds")
barsel04_far_2019
udd_gns_2019
left_join(barsel04_far_2019, udd_gns_2019, by = "Landsdel" = "Område")
?left_join
left_join(barsel04_far_2019, udd_gns_2019, by = c("Landsdel" = "Område"))
udd_gns_2019
barsel04_far_2019
left_join(barsel04_far_2019, udd_gns_2019, by = c("Landsdel" = "OMRÅDE"))
barsel04_far_2019
left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
udd_gns_2019
left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
barsel04_far_2019_udd_gns <- left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
barsel04_far_2019_udd_gns
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ gns)
barsel04_far_2019 <- barsel04_far %>% filter(TID == 2019)
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds")
barsel04_far_2019_udd_gns <- left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
barsel04_far_2019_udd_gns
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ gns) %>% summary()
barsel04_far_2019 <- barsel04_far %>% filter(TID == 2019)
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds")
barsel04_far_2019_udd_gns <- left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
barsel04_far_2019_udd_gns
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ gns + OMRÅDE) %>% summary()
barsel04_far_2019 <- barsel04_far %>% filter(TID == 2019)
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds")
barsel04_far_2019_udd_gns <- left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
barsel04_far_2019_udd_gns
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ gns + OMRÅDE + UDDKOMB) %>% summary()
barsel04_far_2019_udd_gns
barsel04_far_2019 <- barsel04_far %>% filter(TID == 2019)
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds")
barsel04_far_2019_udd_gns <- left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
barsel04_far_2019_udd_gns
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ gns + OMRÅDE + OMRÅDE*gns) %>% summary()
barsel04_far_2019 <- barsel04_far %>% filter(TID == 2019)
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds")
barsel04_far_2019_udd_gns <- left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
barsel04_far_2019_udd_gns
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ gns + OMRÅDE) %>% summary()
barsel04_far_2019 <- barsel04_far %>% filter(TID == 2019)
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds")
barsel04_far_2019_udd_gns <- left_join(barsel04_far_2019, udd_gns_2019, by = c("OMRÅDE" = "Landsdel"))
barsel04_far_2019_udd_gns
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ OMRÅDE + UDDKOMB) %>% summary()
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ gns) %>% summary()
lm(data = barsel04_far_2019_udd_gns, INDHOLD ~ UDDKOMB + gns) %>% summary()
LM_interaction_far <- lm(data = barsel04_far, INDHOLD ~ UDDKOMB + OMRÅDE + TID + UDDKOMB*OMRÅDE)
summary(LM_interaction_far)
LM_no_interaction_far <- lm(data = barsel04_far, INDHOLD ~ UDDKOMB + OMRÅDE + TID)
summary(LM_no_interaction_far)
#test for reduktion til model uden interaktion:
anova(LM_interaction_far, LM_no_interaction_far)
library(tidyverse)
library(sf)
library(rgdal)
url = "https://api.dataforsyningen.dk/landsdele?format=geojson"
geofile = tempfile()
download.file(url, geofile)
geodata <- rgdal::readOGR(geofile, use_iconv = TRUE, encoding = 'UTF-8') #skriv geodata@data for at få en data frame
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds") %>%
mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%  #fjerner "Landsdel" fra navnene
rename(gns_udd_score = gns) %>% arrange(desc(Landsdel))
udd_gns_2019
geodata2 <- geodata #revert til oprindelig
ggplotdata = sf::st_as_sf(geodata)
ggplotdata2 <- data.frame(ggplotdata) %>% arrange(desc(navn)) %>% mutate(udd_gns = udd_gns_2019$gns_udd_score)
ggplotdata2
ggplot(ggplotdata, aes(fill = navn)) +
geom_sf() +
theme_minimal()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$navn)) +
geom_sf() +
theme_minimal() +
labs(fill = "Landsdel")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$udd_gns)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gennemsnitligt uddannennelsesniveau (score)")
knitr::opts_chunk$set(echo = TRUE)
library(statsDK)
library(tidyverse)
library(readxl)
udd_landsdele_2019 <- read_excel(path='Data/uddannelsesgrupper_landsdele_2019.xlsx')
udd_landsdele_2019 <- cbind(udd_landsdele_2019, Antal_indbyggere = rowSums(udd_landsdele_2019[,2:11]))
head(udd_landsdele_2019,11)
udd_landsdele_2019 <- udd_landsdele_2019 %>% mutate(Ingen_ungdomsuddannelse=`H10 Grundskole`, Ungdomsuddannelse=`H20 Gymnasiale uddannelser`+`H30 Erhvervsfaglige uddannelser`+`H35 Adgangsgivende uddannelsesforløb`, Kort_videregående=`H40 Korte videregående uddannelser, KVU`, Mellemlang_videregående = `H50 Mellemlange videregående uddannelser, MVU` + `H60 Bacheloruddannelser, BACH`, Lang_videregående=`H70 Lange videregående uddannelser, LVU` + `H80 Ph.d. og forskeruddannelser`, Uoplyst=`H90 Uoplyst mv.`)
udd_landsdele_2019 <- udd_landsdele_2019 %>% select(Landsdel, Ingen_ungdomsuddannelse, Ungdomsuddannelse, Kort_videregående, Mellemlang_videregående, Lang_videregående, Uoplyst, Antal_indbyggere)
head(udd_landsdele_2019,11)
udd_landsdele_prop_2019 <- udd_landsdele_2019 %>% mutate(ProportionIngen=Ingen_ungdomsuddannelse/Antal_indbyggere, ProportionUngdoms=Ungdomsuddannelse/Antal_indbyggere, ProportionKort=Kort_videregående/Antal_indbyggere, ProportionMellem= Mellemlang_videregående/Antal_indbyggere, ProportionLang=Lang_videregående/Antal_indbyggere, ProportionUoplyst=Uoplyst/Antal_indbyggere) %>% select(Landsdel, ProportionIngen, ProportionUngdoms, ProportionKort, ProportionMellem, ProportionLang, ProportionUoplyst)
head(udd_landsdele_prop_2019,11)
udd_gns_2019 <- udd_landsdele_prop_2019 %>% mutate(gns=ProportionIngen*1+ProportionKort*2+ProportionKort*3+ProportionMellem*4+ProportionLang*5) %>% select(Landsdel, gns)
udd_gns_2019 <- udd_gns_2019[order(-udd_gns_2019$gns),]
head(udd_gns_2019,11)
køn_landsdele_2019 <- read_excel(path='Data/mændkvinder_landsdele_2019.xlsx')
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(PropMænd=Mænd/(Mænd+Kvinder), PropKvinder=Kvinder/(Mænd+Kvinder))
head(køn_landsdele_2019,11)
gnsindkomst_landsdele_2019 <- read_excel(path='Data/gns_indkomst_landsdele_2019.xlsx')
gnsindkomst_landsdele_2019 <- gnsindkomst_landsdele_2019[order(-gnsindkomst_landsdele_2019$Gns_indkomst),]
head(gnsindkomst_landsdele_2019,11)
indkomstgrupper_landsdele_2019 <- read_excel(path='Data/indkomstgrupper_landsdele_2019.xlsx')
indkomstgrupper_landsdele_2019 <- cbind(indkomstgrupper_landsdele_2019, Antal = rowSums(indkomstgrupper_landsdele_2019[,2:17]))
indkomstgrupper_landsdele_2019 <- indkomstgrupper_landsdele_2019 %>% mutate(`Under 25.000 kr.`=`Under 25.000 kr.`/Antal, `25.000 - 49.999 kr.`=`25.000 - 49.999 kr.`/Antal, `50.000 - 74.999 kr.`=`50.000 - 74.999 kr.`/Antal, `75.000 - 99.999 kr.`=`75.000 - 99.999 kr.`/Antal, `100.000 - 124.999 kr.`=`100.000 - 124.999 kr.`/Antal, `125.000 - 149.999 kr.`=`125.000 - 149.999 kr.`/Antal, `150.000 - 174.999 kr.`=`150.000 - 174.999 kr.`/Antal,`175.000 - 199.999 kr.`=`175.000 - 199.999 kr.`/Antal, `200.000 - 224.999 kr.`=`200.000 - 224.999 kr.`/Antal, `225.000 - 249.999 kr.`=`225.000 - 249.999 kr.`/Antal, `250.000 - 299.999 kr.`=`250.000 - 299.999 kr.`/Antal, `300.000 - 349.999 kr.`=`300.000 - 349.999 kr.`/Antal, `350.000 - 399.999 kr.`=`350.000 - 399.999 kr.`/Antal, `400.000 - 449.999 kr.`=`400.000 - 449.999 kr.`/Antal, `450.000 - 499.999 kr.`=`450.000 - 499.999 kr.`/Antal,`500.000 kr. og derover`=`500.000 kr. og derover`/Antal)
head(indkomstgrupper_landsdele_2019,11)
knitr::opts_chunk$set(echo = TRUE)
library(statsDK)
library(tidyverse)
library(readxl)
udd_landsdele_2019 <- read_excel(path='uddannelsesgrupper_landsdele_2019.xlsx')
udd_landsdele_2019 <- cbind(udd_landsdele_2019, Antal_indbyggere = rowSums(udd_landsdele_2019[,2:11]))
head(udd_landsdele_2019,11)
udd_landsdele_2019 <- udd_landsdele_2019 %>% mutate(Ingen_ungdomsuddannelse=`H10 Grundskole`, Ungdomsuddannelse=`H20 Gymnasiale uddannelser`+`H30 Erhvervsfaglige uddannelser`+`H35 Adgangsgivende uddannelsesforløb`, Kort_videregående=`H40 Korte videregående uddannelser, KVU`, Mellemlang_videregående = `H50 Mellemlange videregående uddannelser, MVU` + `H60 Bacheloruddannelser, BACH`, Lang_videregående=`H70 Lange videregående uddannelser, LVU` + `H80 Ph.d. og forskeruddannelser`, Uoplyst=`H90 Uoplyst mv.`)
udd_landsdele_2019 <- udd_landsdele_2019 %>% select(Landsdel, Ingen_ungdomsuddannelse, Ungdomsuddannelse, Kort_videregående, Mellemlang_videregående, Lang_videregående, Uoplyst, Antal_indbyggere)
head(udd_landsdele_2019,11)
udd_landsdele_prop_2019 <- udd_landsdele_2019 %>% mutate(ProportionIngen=Ingen_ungdomsuddannelse/Antal_indbyggere, ProportionUngdoms=Ungdomsuddannelse/Antal_indbyggere, ProportionKort=Kort_videregående/Antal_indbyggere, ProportionMellem= Mellemlang_videregående/Antal_indbyggere, ProportionLang=Lang_videregående/Antal_indbyggere, ProportionUoplyst=Uoplyst/Antal_indbyggere) %>% select(Landsdel, ProportionIngen, ProportionUngdoms, ProportionKort, ProportionMellem, ProportionLang, ProportionUoplyst)
head(udd_landsdele_prop_2019,11)
udd_landsdele_prop_2019 %>% rename(Uoplyst=ProportionUoplyst, Ungdomsuddannelse=ProportionUngdoms, KortVidere=ProportionKort, MellemLang=ProportionMellem, Lang = ProportionLang, Ingen=ProportionIngen) %>% pivot_longer(!Landsdel, names_to = "Uddannelse", values_to = "Proportion") %>% ggplot(mapping = aes(x = Proportion, y=Uddannelse)) + geom_bar(stat='identity', width=0.8, aes(fill=Landsdel)) + facet_wrap(~Landsdel, ncol = 3, nrow = 6) + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) + labs(title = "Uddannelse i landsdele") + theme(axis.text.y = element_text(angle = 0, vjust = 1, hjust=1)) +
theme(text = element_text(size = 8.5), element_line(size = 0.2))
udd_gns_2019 <- udd_landsdele_prop_2019 %>% mutate(gns=ProportionIngen*1+ProportionKort*2+ProportionKort*3+ProportionMellem*4+ProportionLang*5) %>% select(Landsdel, gns)
udd_gns_2019 <- udd_gns_2019[order(-udd_gns_2019$gns),]
head(udd_gns_2019,11)
udd_gns_2019 %>% ggplot(mapping = aes(x = Landsdel, y=gns)) + geom_bar(stat='identity', width=0.8, fill='hotpink') + labs(title = "Vægtet gennemsnit af uddannelse i landsdele") + scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) + theme(text = element_text(size = 9), element_line(size = 0.2)) + ylab("Vægtet gennemsnit")
køn_landsdele_2019 <- read_excel(path='mændkvinder_landsdele_2019.xlsx')
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(PropMænd=Mænd/(Mænd+Kvinder), PropKvinder=Kvinder/(Mænd+Kvinder))
head(køn_landsdele_2019,11)
køn_landsdele_2019 %>% select(Landsdel, PropMænd, PropKvinder) %>% rename(Mænd=PropMænd, Kvinder=PropKvinder) %>% pivot_longer(!Landsdel, names_to = "Køn", values_to = "Proportion") %>% ggplot(mapping = aes(x = Landsdel, y=Proportion)) + geom_bar(stat='identity', width=0.8, aes(fill=Køn), position="dodge") + labs(title = "Fordeling af køn i landsdele") + scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) + theme(text = element_text(size = 9), element_line(size = 0.2))
fødealder_kommune_2019 <- read_excel(path='kommune_alderbørn_2019.xlsx')
fødealder_kommune_2019
kommune_landsdel <- read_excel(path='kommuner_landsdele.xlsx')
fødealder_landsdel_2019 <- fødealder_kommune_2019 %>% full_join(kommune_landsdel) %>% filter(`Gennemsnitsalder for førstegangsfødende kvinder`!= 0.0, `Gennemsnitsalder for samtlige fødende kvinder` != 0.0, `Gennemsnitsalder for førstegangs fædre` != 0, `Gennemsnitsalder for fædre til nyfødte` != 0)
fødealder_landsdel_2019 <- fødealder_landsdel_2019 %>% group_by(Landsdel) %>% summarise(gns_førstefødte_mor=mean(`Gennemsnitsalder for førstegangsfødende kvinder`), gns_alle_mor=mean(`Gennemsnitsalder for samtlige fødende kvinder`), gns_første_far=mean(`Gennemsnitsalder for førstegangs fædre`), gns_alle_far=mean(`Gennemsnitsalder for fædre til nyfødte`), Antal_kommuner=n())
head(fødealder_landsdel_2019,11)
fødealder_landsdel_2019 %>% select(Landsdel, gns_alle_mor, gns_førstefødte_mor, gns_første_far, gns_alle_far) %>% pivot_longer(!Landsdel, names_to = "Forældertype", values_to = "Gennemsnitsalder") %>% ggplot(mapping = aes(x = Landsdel, y=Gennemsnitsalder)) + geom_bar(stat='identity', width=0.8, aes(fill=Forældertype), position="dodge") + labs(title = "Gennemsnitalder for forældertyper i landsdele") + scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) + theme(text = element_text(size = 7.5), element_line(size = 0.2)) + scale_fill_manual(values=c("royalblue4", "violetred1","royalblue2","palevioletred1"))
gnsindkomst_landsdele_2019 <- read_excel(path='gns_indkomst_landsdele_2019.xlsx')
gnsindkomst_landsdele_2019 <- gnsindkomst_landsdele_2019[order(-gnsindkomst_landsdele_2019$Gns_indkomst),]
head(gnsindkomst_landsdele_2019,11)
options(scipen=5)
gnsindkomst_landsdele_2019 %>% ggplot(mapping = aes(x = Landsdel, y=Gns_indkomst)) + geom_bar(stat='identity', width=0.8, fill='hotpink') + labs(title = "Gennemsnitlig indkomst i landsdele") + scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) + theme(text = element_text(size = 9), element_line(size = 0.2)) + ylab("Gennemnitsindkomst")
indkomstgrupper_landsdele_2019 <- read_excel(path='indkomstgrupper_landsdele_2019.xlsx')
indkomstgrupper_landsdele_2019 <- cbind(indkomstgrupper_landsdele_2019, Antal = rowSums(indkomstgrupper_landsdele_2019[,2:17]))
indkomstgrupper_landsdele_2019 <- indkomstgrupper_landsdele_2019 %>% mutate(`Under 25.000 kr.`=`Under 25.000 kr.`/Antal, `25.000 - 49.999 kr.`=`25.000 - 49.999 kr.`/Antal, `50.000 - 74.999 kr.`=`50.000 - 74.999 kr.`/Antal, `75.000 - 99.999 kr.`=`75.000 - 99.999 kr.`/Antal, `100.000 - 124.999 kr.`=`100.000 - 124.999 kr.`/Antal, `125.000 - 149.999 kr.`=`125.000 - 149.999 kr.`/Antal, `150.000 - 174.999 kr.`=`150.000 - 174.999 kr.`/Antal,`175.000 - 199.999 kr.`=`175.000 - 199.999 kr.`/Antal, `200.000 - 224.999 kr.`=`200.000 - 224.999 kr.`/Antal, `225.000 - 249.999 kr.`=`225.000 - 249.999 kr.`/Antal, `250.000 - 299.999 kr.`=`250.000 - 299.999 kr.`/Antal, `300.000 - 349.999 kr.`=`300.000 - 349.999 kr.`/Antal, `350.000 - 399.999 kr.`=`350.000 - 399.999 kr.`/Antal, `400.000 - 449.999 kr.`=`400.000 - 449.999 kr.`/Antal, `450.000 - 499.999 kr.`=`450.000 - 499.999 kr.`/Antal,`500.000 kr. og derover`=`500.000 kr. og derover`/Antal)
head(indkomstgrupper_landsdele_2019,11)
indkomstgrupper_landsdele_2019 %>% select(!Antal) %>% pivot_longer(!Landsdel, names_to = "Indkomstgruppe", values_to = "Proportion") %>% ggplot(mapping = aes(x = Proportion, y=Indkomstgruppe)) + geom_bar(stat='identity', width=0.8, aes(fill=Landsdel)) + facet_wrap(~Landsdel, ncol = 3, nrow = 6) + theme(axis.text.x = element_text(angle = 0, vjust = 0.5, hjust=1)) + labs(title = "Fordeling af indkomstgrupper i landsdele") + theme(axis.text.y = element_text(angle = 0, vjust = 1, hjust=1)) +
theme(text = element_text(size = 5), element_line(size = 0.2))
køn_landsdele_2019
write_rds(x = køn_landsdele_2019, file = "Data/køn_landsdele_2019.rds")
geodata@data
geodata@plotOrder
geodata@navne
geodata$navne
geodata$navn
køn_landsdele_2019 <- read_rds("Data/køn_landsdele_2019.rds")
køn_landsdele_2019
køn_landsdele_2019 <- read_rds("Data/køn_landsdele_2019.rds")
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(Forskel = PropMænd - PropKvinder,
Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
køn_landsdele_2019
køn_landsdele_2019 <- read_rds("Data/køn_landsdele_2019.rds")
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(Forskel = Mænd - Kvinder,
Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
køn_landsdele_2019
ggplotdata2 <- mutate(køn_landsdele = køn_landsdele_2019$Forskel)
ggplotdata2 <- ggplotdata2 %>% mutate(køn_landsdele = køn_landsdele_2019$Forskel)
ggplotdata2
ggplotdata2 <- ggplotdata2 %>% mutate(antal_forskel_køn = køn_landsdele_2019$Forskel)
ggplotdata2
ggplotdata2 <- data.frame(ggplotdata) %>% arrange(desc(navn)) %>% mutate(udd_gns = udd_gns_2019$gns_udd_score)
ggplotdata2
ggplotdata2 <- data.frame(ggplotdata) %>% arrange(desc(navn)) %>% mutate(udd_gns = udd_gns_2019$gns_udd_score)
ggplotdata2
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds") %>%
mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%  #fjerner "Landsdel" fra navnene
rename(gns_udd_score = gns) %>% arrange(desc(Landsdel))
udd_gns_2019
ggplotdata = sf::st_as_sf(geodata)
ggplotdata2 <- data.frame(ggplotdata) %>% arrange(desc(navn)) %>% mutate(udd_gns = udd_gns_2019$gns_udd_score)
ggplotdata2
køn_landsdele_2019 <- read_rds("Data/køn_landsdele_2019.rds")
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(Forskel = Mænd - Kvinder,
Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
køn_landsdele_2019
ggplotdata2 <- ggplotdata2 %>% mutate(Diff_køn_antal = køn_landsdele_2019$Forskel)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_antal)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder")
write_rds(x = gnsindkomst_landsdele_2019, file = "Data/gns_indkomst_landsdele_2019.rds")
gnsindkomst_landsdele_2019 <- read_rds("Data/gns_indkomst_landsdele_2019.rds")
gnsindkomst_landsdele_2019 <- read_rds("Data/gns_indkomst_landsdele_2019.rds")
gnsindkomst_landsdele_2019 <- gnsindkomst_landsdele_2019 %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
gnsindkomst_landsdele_2019
gnsindkomst_landsdele_2019 <- read_rds("Data/gns_indkomst_landsdele_2019.rds")
gnsindkomst_landsdele_2019 <- gnsindkomst_landsdele_2019 %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
gnsindkomst_landsdele_2019
ggplotdata2 <- ggplotdata2 %>% mutate(Gns_indkomst = gnsindkomst_landsdele_2019$Gns_indkomst)
ggplotdata2
ggplotdata2 %>% ggplot(geometry, aes(fill = Gns_indkomst))
ggplotdata2 %>% ggplot(geometry, aes(fill = Gns_indkomst)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gns. indkomst")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Gns_indkomst)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gns. indkomst")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
barsel11_big <- read_rds("Data/barsel11.rds")
barsel11_big
unique(barsel11_big$BRANCHE)
barsel11_far %>% filter(TID == 2019)
barsel11_big <- read_rds("Data/barsel11.rds")
barsel11_big
barsel11_far <- barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS %in% c("Topledere eller lønmodtager på højeste niveau", "Lønmodtagere på mellemniveau", "Lønmodtager på grundniveau"),
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ",")),
TID = factor(TID)) %>%
select(SOCIALSTATUS, BRANCHE, TID, INDHOLD)
barsel11_far
barsel11_far %>% filter(TID == 2019)
barsel11_far %>% filter(TID == 2019) %>% arrange(INDHOLD)
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "Socialstatus i alt",
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ",")),
TID = factor(TID)) %>%
select(SOCIALSTATUS, BRANCHE, TID, INDHOLD)
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "Social status i alt",
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ",")),
TID = factor(TID)) %>%
select(SOCIALSTATUS, BRANCHE, TID, INDHOLD)
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ",")),
TID = factor(TID)) %>%
select(SOCIALSTATUS, BRANCHE, TID, INDHOLD)
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ","))) %>%
select(SOCIALSTATUS, BRANCHE, TID, INDHOLD)
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
TID == 2015
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
TID == 2015,
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ","))) %>%
select(SOCIALSTATUS, BRANCHE, TID, INDHOLD)
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
TID == 2015,
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ","))) %>%
select(SOCIALSTATUS, BRANCHE, TID, INDHOLD) %>% arrange(desc(INDHOLD))
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
TID == 2015,
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ","))) %>%
select(SOCIALSTATUS, BRANCHE, TID, INDHOLD) %>% arrange(INDHOLD)
barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
TID == 2015,
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ","))) %>%
select(BRANCHE, TID, INDHOLD) %>% arrange(INDHOLD)
brancher_simpelt_gns <- barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
TID == 2015,
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ","))) %>%
select(BRANCHE, TID, INDHOLD) %>% arrange(INDHOLD)
brancher_simpelt_gns
quantile(brancher_simpelt_gns)
quantile(brancher_simpelt_gns$INDHOLD)
?quantile
quantile(brancher_simpelt_gns$INDHOLD probs = c(1/3, 2/3, 1))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(1/3, 2/3, 1))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(1/3, 2/3, 1))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(1/3, 2/3))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(0.25, 2/3))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(0.33, 2/3))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(1/3, 2/3))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(1/3, 2/3, 1))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(1/3, 2/3))
quantile(brancher_simpelt_gns$INDHOLD, probs = c(1/3, 2/3, 1))
library(readxl)
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre %>% mutate(Total = rowSums(brancher_nedre))
brancher_nedre
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre
brancher_nedre %>% mutate(Total = rowSums(brancher_nedre[, -"Landsdel"]))
brancher_nedre %>% mutate(Total = rowSums(brancher_nedre[, -Landsdel]))
brancher_nedre %>% mutate(Total = rowSums(brancher_nedre[, - Landsdel]))
rowSums(brancher_nedre[, - Landsdel])
rowSums(brancher_nedre[, -Landsdel])
rowSums(brancher_nedre[, -"Landsdel"])
?rowSums
brancher_nedre %>% mutate(Total = rowSums(across(where(is.numeric))))
?across
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre <- mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
brancher_nedre
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre <- mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre <- brancher_nedre %>%  mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
brancher_nedre
brancher_midte <- read_excel("Data/brancher_beskæftigede_landsdele_midte.xlsx")
brancher_midte <- read_excel("Data/brancher_beskæftigede_landsdele_midte.xlsx")
brancher_midte <- brancher_midte %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
brancher_midte
brancher_top <- read_excel("Data/brancher_beskæftigede_landsdele_øvre.xlsx")
brancher_top <- brancher_top %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
brancher_top
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre <- brancher_nedre %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
ggplotdata2 <- ggplotdata2 %>% mutate(antal_i_brancher_nedre = brancher_nedre$Total)
ggplotdata2
ggplotdata2 <- ggplotdata2 %>% mutate(antal_i_brancher_nedre = brancher_nedre$Total,
antal_i_brancher_midte = brancher_midte$Total,
antal_i_brancher_top = brancher_top$Total)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = antal_i_brancher_nedre)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal i brancher med nedre 1/3 i gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$antal_i_brancher_nedre)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal i brancher med nedre 1/3 i gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$antal_i_brancher_nedre)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal i brancher med nedre 1/3\n i gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$antal_i_brancher_nedre)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal i brancher med nedre 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$antal_i_brancher_midte)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal i brancher med midterste 1/3\ni gns. barselsdage")
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre <- brancher_nedre %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel"),
Prop = Sum/Total_beskæftigede) %>%
arrange(desc(Landsdel))
brancher_nedre
brancher_midte <- read_excel("Data/brancher_beskæftigede_landsdele_midte.xlsx")
brancher_midte <- brancher_midte %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel"),
Prop = Sum/Total_beskæftigede) %>%
arrange(desc(Landsdel))
brancher_midte
brancher_top <- read_excel("Data/brancher_beskæftigede_landsdele_øvre.xlsx")
brancher_top <- brancher_top %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel"),
Prop = Sum/Total_beskæftigede) %>%
arrange(desc(Landsdel))
brancher_top
ggplotdata = sf::st_as_sf(geodata)
ggplotdata2 <- data.frame(ggplotdata) %>% arrange(desc(navn)) %>% mutate(udd_gns = udd_gns_2019$gns_udd_score)
ggplotdata2
ggplot(ggplotdata, aes(fill = navn)) +
geom_sf() +
theme_minimal()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$navn)) +
geom_sf() +
theme_minimal() +
labs(fill = "Landsdel")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$udd_gns)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gennemsnitligt uddannennelsesniveau (score)")
labs(fill = "Gennemsnitligt uddannennelsesniveau)
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$navn)) +
geom_sf() +
theme_minimal() +
labs(fill = "Landsdel")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$udd_gns)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gennemsnitligt uddannennelsesniveau")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$navn)) +
geom_sf() +
theme_minimal() +
labs(fill = "Landsdel")
køn_landsdele_2019 <- read_rds("Data/køn_landsdele_2019.rds")
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(Forskel = Mænd - Kvinder,
Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
køn_landsdele_2019
ggplotdata2 <- ggplotdata2 %>% mutate(Diff_køn_antal = køn_landsdele_2019$Forskel)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_antal)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder")
gnsindkomst_landsdele_2019 <- read_rds("Data/gns_indkomst_landsdele_2019.rds")
gnsindkomst_landsdele_2019 <- gnsindkomst_landsdele_2019 %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
gnsindkomst_landsdele_2019
ggplotdata2 <- ggplotdata2 %>% mutate(Gns_indkomst = gnsindkomst_landsdele_2019$Gns_indkomst)
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Gns_indkomst)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gns. indkomst")
ggplotdata2 <- ggplotdata2 %>% mutate(prop_i_brancher_nedre = brancher_nedre$Prop,
prop_i_brancher_midte = brancher_midte$Prop,
prop_i_brancher_top = brancher_top$Prop)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_nedre)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med nedre 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_midte)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal i brancher med midterste 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_midte)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med midterste 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_top)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med øverste 1/3\ni gns. barselsdage")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
brancher_simpelt_gns <- barsel11_big %>% filter(ENHED == "Far - Dage med barselsdagpenge efter fødsel (gennemsnit)",
SEKTOR == "Sektor i alt",
SOCIALSTATUS == "I alt",
TID == 2019,
!BRANCHE %in% c("TOT Erhverv i alt", "11 Uoplyst aktivitet")) %>%
mutate(INDHOLD = parse_number(INDHOLD, locale = locale(decimal_mark = ","))) %>%
select(BRANCHE, TID, INDHOLD) %>% arrange(INDHOLD)
brancher_simpelt_gns
quantile(brancher_simpelt_gns$INDHOLD, probs = c(1/3, 2/3, 1))
