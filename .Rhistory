ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_color_hue()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_colour_viridis_d()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_colour_viridis_d(Option = )
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_colour_viridis_d(Option = 'D')
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_colour_viridis_d(Option = 'D')
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_colour_viridis_d(Option = "D")
ggplotdata2 <- ggplotdata2 %>% mutate(Diff_køn_relativ = køn_landsdele_2019$Relativ_forskel)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_colour_viridis_d(Option = "D")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_colour_viridis_d(option = "D")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$navn)) +
geom_sf() +
theme_minimal() +
labs(fill = "Landsdel") +
scale_color_viridis_d()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$navn)) +
geom_sf() +
theme_minimal() +
labs(fill = "Landsdel")
library(tidyverse)
library(sf)
library(rgdal)
library(readxl)
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
library(tidyverse)
library(sf)
library(rgdal)
library(readxl)
url = "https://api.dataforsyningen.dk/landsdele?format=geojson"
geofile = tempfile()
download.file(url, geofile)
geodata <- rgdal::readOGR(geofile, use_iconv = TRUE, encoding = 'UTF-8') #skriv geodata@data for at få en data frame
udd_gns_2019 <- read_rds("Data/udd_gns_2019.rds") %>%
mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%  #fjerner "Landsdel" fra navnene
rename(gns_udd_score = gns) %>% arrange(desc(Landsdel))
udd_gns_2019
ggplotdata = sf::st_as_sf(geodata)
ggplotdata2 <- data.frame(ggplotdata) %>% arrange(desc(navn)) %>% mutate(udd_gns = udd_gns_2019$gns_udd_score)
ggplotdata2
ggplot(ggplotdata, aes(fill = navn)) +
geom_sf() +
theme_minimal()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$navn)) +
geom_sf() +
theme_minimal() +
labs(fill = "Landsdel")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$udd_gns)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gennemsnitligt uddannennelsesniveau")
køn_landsdele_2019 <- read_rds("Data/køn_landsdele_2019.rds")
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(Relativ_forskel = ((Mænd - Kvinder)/(Mænd + Kvinder))*100,
Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
køn_landsdele_2019
ggplotdata2 <- ggplotdata2 %>% mutate(Diff_køn_relativ = køn_landsdele_2019$Relativ_forskel)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
gnsindkomst_landsdele_2019 <- read_rds("Data/gns_indkomst_landsdele_2019.rds")
gnsindkomst_landsdele_2019 <- gnsindkomst_landsdele_2019 %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
gnsindkomst_landsdele_2019
ggplotdata2 <- ggplotdata2 %>% mutate(Gns_indkomst = gnsindkomst_landsdele_2019$Gns_indkomst)
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Gns_indkomst)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gns. indkomst")
brancher_nedre <- read_excel("Data/brancher_beskæftigede_landsdele_nedre.xlsx")
brancher_nedre <- brancher_nedre %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel"),
Prop = Sum/Total_beskæftigede) %>%
arrange(desc(Landsdel))
brancher_nedre
brancher_midte <- read_excel("Data/brancher_beskæftigede_landsdele_midte.xlsx")
brancher_midte <- brancher_midte %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel"),
Prop = Sum/Total_beskæftigede) %>%
arrange(desc(Landsdel))
brancher_midte
brancher_top <- read_excel("Data/brancher_beskæftigede_landsdele_øvre.xlsx")
brancher_top <- brancher_top %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel"),
Prop = Sum/Total_beskæftigede) %>%
arrange(desc(Landsdel))
brancher_top
ggplotdata2 <- ggplotdata2 %>% mutate(prop_i_brancher_nedre = brancher_nedre$Prop,
prop_i_brancher_midte = brancher_midte$Prop,
prop_i_brancher_top = brancher_top$Prop)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_nedre)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med nedre 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_midte)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med midterste 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_top)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med øverste 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_fill_viridis_d()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_color_viridis_d()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent") +
scale_color_viridis_d(option = 'a')
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_colour_viridis_d()
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_colour_viridis_d() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_c(trans = "sqrt", alpha = .4) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_colour_viridis_d(alpha = .4) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_b(direction = -1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_c(direction = -1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_d(direction = -1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_color_viridis_d(direction = -1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_d(direction = -1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_b(direction = -1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_c(direction = -1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_c(direction = -1, ) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis_c(direction = 1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_magma_c() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_brewer() +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "Magma") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
library(viridis)
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "Magma") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
#scale_fill_viridis(option = "Magma") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "Magma") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "magma") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
?scale_fill_viridis
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "A") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "B") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
library(tidyverse)
library(sf)
library(rgdal)
library(readxl)
library(vidiris)
library(vidiris)
library(tidyverse)
library(sf)
library(rgdal)
library(readxl)
library(viridis)
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "C") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "D") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "E") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "F") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "G") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "H") +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "H", direction = -1) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "H", direction = -1, alpha = 0.5) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "H", direction = -1, alpha = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "H", direction = -1, alpha = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "H", direction = -1, alpha = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata, aes(fill = navn)) +
geom_sf() +
theme_minimal()
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$navn)) +
geom_sf() +
theme_minimal() +
labs(fill = "Landsdel")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$udd_gns)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gennemsnitligt uddannennelsesniveau")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Gns_indkomst)) +
geom_sf() +
theme_minimal() +
labs(fill = "Gns. indkomst")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_nedre)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med nedre 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_midte)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med midterste 1/3\ni gns. barselsdage")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$prop_i_brancher_top)) +
geom_sf() +
theme_minimal() +
labs(fill = "Andel i brancher med øverste 1/3\ni gns. barselsdage")
Q10Q90 <- read_rds("Data/Q10Q90_landsdel_2019.rds")
Q10Q90
Q10Q90 <- read_rds("Data/Q10Q90_landsdel_2019.rds")
Q10Q90 <- Q10Q90 %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
gnsindkomst_landsdele_2019
Q10Q90
ggplotdata2 <- ggplotdata2 %>% mutate(Q10 = Q10Q90$Q10,
Q90 = Q10Q90$Q90)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Q10)) +
geom_sf() +
theme_minimal() +
labs(fill = "Q10")
Q10Q90
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Q90)) +
geom_sf() +
theme_minimal() +
labs(fill = "Q90")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = -1, alpha = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "mako", direction = 1, alpha = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "viridis", direction = 1, alpha = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75, begin = 0.5) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75, end =  0.5) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75, end =  0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75, end = 0.75) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75, end = 0.85) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75, begin = 0.2, end = 0.85) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Diff_køn_relativ)) +
geom_sf() +
theme_minimal() +
scale_fill_viridis(option = "plasma", direction = 1, alpha = 0.75, begin = 0.15, end = 0.85) +
labs(fill = "Antal mænd - antal kvinder, \nforskel i procent")
knitr::opts_chunk$set(echo = TRUE)
library(statsDK)
library(tidyverse)
library(readxl)
udd_landsdele_2019 <- read_excel(path='Data/uddannelsesgrupper_landsdele_2019.xlsx')
udd_landsdele_2019 <- cbind(udd_landsdele_2019, Antal_indbyggere = rowSums(udd_landsdele_2019[,2:11]))
head(udd_landsdele_2019,11)
udd_landsdele_2019 <- udd_landsdele_2019 %>% mutate(Ingen_ungdomsuddannelse=`H10 Grundskole`, Ungdomsuddannelse=`H20 Gymnasiale uddannelser`+`H30 Erhvervsfaglige uddannelser`+`H35 Adgangsgivende uddannelsesforløb`, Kort_videregående=`H40 Korte videregående uddannelser, KVU`, Mellemlang_videregående = `H50 Mellemlange videregående uddannelser, MVU` + `H60 Bacheloruddannelser, BACH`, Lang_videregående=`H70 Lange videregående uddannelser, LVU` + `H80 Ph.d. og forskeruddannelser`, Uoplyst=`H90 Uoplyst mv.`)
udd_landsdele_2019 <- udd_landsdele_2019 %>% select(Landsdel, Ingen_ungdomsuddannelse, Ungdomsuddannelse, Kort_videregående, Mellemlang_videregående, Lang_videregående, Uoplyst, Antal_indbyggere)
head(udd_landsdele_2019,11)
udd_landsdele_prop_2019 <- udd_landsdele_2019 %>% mutate(ProportionIngen=Ingen_ungdomsuddannelse/Antal_indbyggere, ProportionUngdoms=Ungdomsuddannelse/Antal_indbyggere, ProportionKort=Kort_videregående/Antal_indbyggere, ProportionMellem= Mellemlang_videregående/Antal_indbyggere, ProportionLang=Lang_videregående/Antal_indbyggere, ProportionUoplyst=Uoplyst/Antal_indbyggere) %>% select(Landsdel, ProportionIngen, ProportionUngdoms, ProportionKort, ProportionMellem, ProportionLang, ProportionUoplyst)
head(udd_landsdele_prop_2019,11)
udd_pivot <- udd_landsdele_prop_2019  %>% rename(Uoplyst=ProportionUoplyst, Ungdomsuddannelse=ProportionUngdoms, KortVidere=ProportionKort, MellemLang=ProportionMellem, Lang = ProportionLang, Ingen=ProportionIngen) %>% pivot_longer(!Landsdel, names_to = "Uddannelse", values_to = "Proportion")
udd_pivot <- udd_pivot %>% mutate(Uddannelse=fct_inorder(Uddannelse))
udd_pivot %>% ggplot(mapping = aes(x = Proportion, y=Uddannelse)) + geom_bar(stat='identity', width=0.8, aes(fill=Landsdel)) + facet_wrap(~Landsdel, ncol = 3, nrow = 6) + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) + labs(title = "Uddannelse i landsdele") + theme(axis.text.y = element_text(angle = 0, vjust = 1, hjust=1)) +
theme(text = element_text(size = 8.5), element_line(size = 0.2))
udd_gns_2019 <- udd_landsdele_prop_2019 %>% mutate(gns=ProportionIngen*1+ProportionUngdoms*2+ProportionKort*3+ProportionMellem*4+ProportionLang*5) %>% select(Landsdel, gns)
udd_gns_2019 <- udd_gns_2019[order(-udd_gns_2019$gns),]
head(udd_gns_2019,11)
udd_gns_2019 %>% mutate(Landsdel = fct_relevel(Landsdel,
'Landsdel Bornholm','Landsdel Byen København','Landsdel Københavns omegn', 'Landsdel Nordsjælland', 'Landsdel Vest- og Sydsjælland', 'Landsdel Østsjælland', 'Landsdel Fyn', 'Landsdel Sydjylland', 'Landsdel Vestjylland', 'Landsdel Østjylland', 'Landsdel Nordjylland')) %>% ggplot(mapping = aes(x = Landsdel, y=gns)) + geom_bar(stat='identity', width=0.8, fill='hotpink') + labs(title = "Vægtet gennemsnit af uddannelse i landsdele") + scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) + theme(text = element_text(size = 9), element_line(size = 0.2)) + ylab("Vægtet gennemsnit")
køn_landsdele_2019 <- read_excel(path='Data/mændkvinder_landsdele_2019.xlsx')
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(PropMænd=Mænd/(Mænd+Kvinder), PropKvinder=Kvinder/(Mænd+Kvinder))
head(køn_landsdele_2019,11)
køn_landsdele_2019 %>% select(Landsdel, PropMænd, PropKvinder) %>% rename(Mænd=PropMænd, Kvinder=PropKvinder) %>% pivot_longer(!Landsdel, names_to = "Køn", values_to = "Proportion") %>% ggplot(mapping = aes(x = Landsdel, y=Proportion)) + geom_bar(stat='identity', width=0.8, aes(fill=Køn), position="dodge") + labs(title = "Fordeling af køn i landsdele") + scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) + theme(text = element_text(size = 9), element_line(size = 0.2))
køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(Forskel = (Mænd - Kvinder)/(Mænd+Kvinder)*100) %>% arrange(desc(Landsdel))
køn_landsdele_2019
fødealder_kommune_2019 <- read_excel(path='Data/kommune_alderbørn_2019.xlsx')
fødealder_kommune_2019
kommune_landsdel <- read_excel(path='Data/kommuner_landsdele.xlsx')
fødealder_landsdel_2019 <- fødealder_kommune_2019 %>% full_join(kommune_landsdel) %>% filter(`Gennemsnitsalder for førstegangsfødende kvinder`!= 0.0, `Gennemsnitsalder for samtlige fødende kvinder` != 0.0, `Gennemsnitsalder for førstegangs fædre` != 0, `Gennemsnitsalder for fædre til nyfødte` != 0)
fødealder_landsdel_2019 <- fødealder_landsdel_2019 %>% group_by(Landsdel) %>% summarise(gns_førstefødte_mor=mean(`Gennemsnitsalder for førstegangsfødende kvinder`), gns_førstefødte_far=mean(`Gennemsnitsalder for førstegangs fædre`), Antal_kommuner=n())
head(fødealder_landsdel_2019,11)
fødealder_landsdel_2019 %>% select(Landsdel, gns_førstefødte_mor, gns_førstefødte_far) %>% pivot_longer(!Landsdel, names_to = "Forældertype", values_to = "Gennemsnitsalder") %>% ggplot(mapping = aes(x = Landsdel, y=Gennemsnitsalder)) + geom_bar(stat='identity', width=0.8, aes(fill=Forældertype), position="dodge") + labs(title = "Gennemsnitalder for forældertyper i landsdele") + scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) + theme(text = element_text(size = 7.5), element_line(size = 0.2)) + scale_fill_manual(values=c("royalblue1", "violetred1"))
gnsindkomst_landsdele_2019 <- read_excel(path='Data/gns_indkomst_landsdele_2019.xlsx')
gnsindkomst_landsdele_2019 <- gnsindkomst_landsdele_2019[order(-gnsindkomst_landsdele_2019$Gns_indkomst),]
head(gnsindkomst_landsdele_2019,11)
options(scipen=5)
gnsindkomst_landsdele_2019 %>% mutate(Landsdel = fct_relevel(Landsdel,
'Landsdel Bornholm','Landsdel Byen København','Landsdel Københavns omegn', 'Landsdel Nordsjælland', 'Landsdel Vest- og Sydsjælland', 'Landsdel Østsjælland', 'Landsdel Fyn', 'Landsdel Sydjylland', 'Landsdel Vestjylland', 'Landsdel Østjylland', 'Landsdel Nordjylland'))  %>% ggplot(mapping = aes(x = Landsdel, y=Gns_indkomst)) + geom_bar(stat='identity', width=0.8, fill='hotpink') + labs(title = "Gennemsnitlig indkomst i landsdele") + scale_x_discrete(labels = function(x) str_wrap(x, width = 8)) + theme(text = element_text(size = 9), element_line(size = 0.2)) + ylab("Gennemnitsindkomst")
indkomstgrupper_landsdele_2019 <- read_excel(path='Data/indkomstgrupper_landsdele_2019.xlsx')
indkomstgrupper_landsdele_2019 <- cbind(indkomstgrupper_landsdele_2019, Antal = rowSums(indkomstgrupper_landsdele_2019[,2:17]))
indkomstgrupper_landsdele_2019 <- indkomstgrupper_landsdele_2019 %>% mutate(`Under 25.000 kr.`=`Under 25.000 kr.`/Antal, `25.000 - 49.999 kr.`=`25.000 - 49.999 kr.`/Antal, `50.000 - 74.999 kr.`=`50.000 - 74.999 kr.`/Antal, `75.000 - 99.999 kr.`=`75.000 - 99.999 kr.`/Antal, `100.000 - 124.999 kr.`=`100.000 - 124.999 kr.`/Antal, `125.000 - 149.999 kr.`=`125.000 - 149.999 kr.`/Antal, `150.000 - 174.999 kr.`=`150.000 - 174.999 kr.`/Antal,`175.000 - 199.999 kr.`=`175.000 - 199.999 kr.`/Antal, `200.000 - 224.999 kr.`=`200.000 - 224.999 kr.`/Antal, `225.000 - 249.999 kr.`=`225.000 - 249.999 kr.`/Antal, `250.000 - 299.999 kr.`=`250.000 - 299.999 kr.`/Antal, `300.000 - 349.999 kr.`=`300.000 - 349.999 kr.`/Antal, `350.000 - 399.999 kr.`=`350.000 - 399.999 kr.`/Antal, `400.000 - 449.999 kr.`=`400.000 - 449.999 kr.`/Antal, `450.000 - 499.999 kr.`=`450.000 - 499.999 kr.`/Antal,`500.000 kr. og derover`=`500.000 kr. og derover`/Antal)
head(indkomstgrupper_landsdele_2019,11)
indkomstgrupper_landsdele_2019 <- indkomstgrupper_landsdele_2019 %>% select(!Antal) %>% pivot_longer(!Landsdel, names_to = "Indkomstgruppe", values_to = "Proportion")
indkomstgrupper_landsdele_2019 <- indkomstgrupper_landsdele_2019 %>% mutate(Indkomstgruppe=fct_inorder(Indkomstgruppe))
indkomstgrupper_landsdele_2019 %>% ggplot(mapping = aes(x = Proportion, y=Indkomstgruppe)) + geom_bar(stat='identity', width=0.8, aes(fill=Landsdel)) + facet_wrap(~Landsdel, ncol = 3, nrow = 6) + theme(axis.text.x = element_text(angle = 0, vjust = 0.5, hjust=1)) + labs(title = "Fordeling af indkomstgrupper i landsdele") + theme(axis.text.y = element_text(angle = 0, vjust = 1, hjust=1)) +
theme(text = element_text(size = 5), element_line(size = 0.2))
fulldata <- gnsindkomst_landsdele_2019 %>% full_join(udd_gns_2019)
fulldata <- fulldata %>% full_join(fødealder_landsdel_2019)
fulldata <- fulldata %>% full_join(køn_landsdele_2019)
deciler_kommuner <- read_excel("Data/deciler_kommuner_2019.xlsx")
kommune_landsdel_udenchristian <- kommune_landsdel %>% filter(Kommune!='Christiansø')
deciler_landsdel_2019 <- deciler_kommuner %>% full_join(kommune_landsdel_udenchristian) %>% group_by(Landsdel) %>% summarise(Q10=mean(`1. decil`), Q50=mean(`5. decil`),Q90=mean(`9. decil`), Antal_kommuner=n())
deciler_landsdel_2019
deciler_landsdel_2019 %>% mutate(Landsdel = fct_relevel(Landsdel,
'Landsdel Bornholm','Landsdel Byen København','Landsdel Københavns omegn', 'Landsdel Nordsjælland', 'Landsdel Vest- og Sydsjælland', 'Landsdel Østsjælland', 'Landsdel Fyn', 'Landsdel Sydjylland', 'Landsdel Vestjylland', 'Landsdel Østjylland', 'Landsdel Nordjylland')) %>% select(!Antal_kommuner) %>% pivot_longer(!Landsdel, names_to = "Deciler", values_to = "Indkomst")  %>% ggplot(mapping = aes(x = Deciler, y=Indkomst)) + geom_bar(stat='identity', width=0.8, aes(fill=Landsdel)) + facet_wrap(~Landsdel, ncol = 6, nrow = 3) + theme(axis.text.x = element_text(angle = 0, vjust = 0.5, hjust=1)) + labs(title = "Fordeling af indkomstgrupper i landsdele") + theme(axis.text.y = element_text(angle = 0, vjust = 1, hjust=1)) +
theme(text = element_text(size = 5), element_line(size = 0.2))
getwd()
write_rds(x = deciler_landsdel_2019, file = "Data/deciler_landsdel_2019.rds")
deciler_landsdele <- read_rds("Data/deciler_landsdel_2019.rds")
deciler_landsdele <- deciler_landsdele %>% mutate(Landsdel = str_remove_all(string = Landsdel, pattern = "Landsdel")) %>%
arrange(desc(Landsdel))
gnsindkomst_landsdele_2019
deciler_landsdele
ggplotdata2 <- ggplotdata2 %>% mutate(Q10 = deciler_landsdele$Q10,
Q50 = deciler_landsdele$Q50,
Q90 = deciler_landsdele$Q90)
ggplotdata2
ggplot(ggplotdata2$geometry, aes(fill = ggplotdata2$Q50)) +
geom_sf() +
theme_minimal() +
labs(fill = "Q50 - medianindkomst")
