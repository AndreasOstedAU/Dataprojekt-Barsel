---
title: "Dataprojekt"
author: "Nicoline Sørensen"
date: "3/3/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Loading data receiver package:
```{r}
library(statsDK)
library(tidyverse)
```

## DATA FOR UDDANNELSE I FORSKELLIGE LANDSDELE + INDBYGGERTAL I DENNE GRUPPE

Data kommer fra HFUDD11, som har data på folks uddannelsesniveau og kun inkluderer folk i alderen 15-69 år. Dette er dog okay, da vi kun arbejder med folk i den arbejdsdygtige alder (og dermed også fødedygtige). Data er inddelt i uddannelsesgrupper, men for at få det til at passe til uddannelsesgrupperne i BARSEL04 er nedenstående sammenlægning brugt:

Ingen ungdomsuddannelse = (H10 Grundskole)
Ungdomsuddannelse = (H20 Gymnasial uddannelse + H30 Erhvervsuddannelse + H35 Adgangsgivende uddannelsesforløb)
Kort videregående = (H40 KVU)
Mellemlang videregående = (H50 MVU + H60 BACH)
Lang videregående = (H70 LVU + H80 Ph.d. og forsker)

Uoolyst er ikke medtaget i BARSEL04, men fremgår her for at fremskaffe det korrekte antal indbyggere i denne aldersgruppe for hver landsdel.

```{r}
udd_landsdele_2019 <- read_excel(path='uddannelsesgrupper_landsdele_2019.xlsx')

udd_landsdele_2019 <- cbind(udd_landsdele_2019, Antal_indbyggere = rowSums(udd_landsdele_2019[,2:11]))

head(udd_landsdele_2019,11)
```

```{r}
udd_landsdele_2019 <- udd_landsdele_2019 %>% mutate(Ingen_ungdomsuddannelse=`H10 Grundskole`, Ungdomsuddannelse=`H20 Gymnasiale uddannelser`+`H30 Erhvervsfaglige uddannelser`+`H35 Adgangsgivende uddannelsesforløb`, Kort_videregående=`H40 Korte videregående uddannelser, KVU`, Mellemlang_videregående = `H50 Mellemlange videregående uddannelser, MVU` + `H60 Bacheloruddannelser, BACH`, Lang_videregående=`H70 Lange videregående uddannelser, LVU` + `H80 Ph.d. og forskeruddannelser`, Uoplyst=`H90 Uoplyst mv.`)

udd_landsdele_2019 <- udd_landsdele_2019 %>% select(Landsdel, Ingen_ungdomsuddannelse, Ungdomsuddannelse, Kort_videregående, Mellemlang_videregående, Lang_videregående, Uoplyst, Antal_indbyggere)

head(udd_landsdele_2019,11)
```
Nedenfor udregnes proportionerne af hver uddannelsesgruppe i landsdelene, og gemmes i en ny tabel.

```{r}
udd_landsdele_prop_2019 <- udd_landsdele_2019 %>% mutate(ProportionIngen=Ingen_ungdomsuddannelse/Antal_indbyggere, ProportionUngdoms=Ungdomsuddannelse/Antal_indbyggere, ProportionKort=Kort_videregående/Antal_indbyggere, ProportionMellem= Mellemlang_videregående/Antal_indbyggere, ProportionLang=Lang_videregående/Antal_indbyggere, ProportionUoplyst=Uoplyst/Antal_indbyggere) %>% select(Landsdel, ProportionIngen, ProportionUngdoms, ProportionKort, ProportionMellem, ProportionLang, ProportionUoplyst)

head(udd_landsdele_prop_2019,11)
```
Nedenfor udregnes et "gennemsnit" over uddannelsesniveu i hver landsdel. 1 er ingen, 2 er ungdom, ..., 5 er lang, og så regnes det vægtede gennemsnit. Giver ikke så meget mening, men giver et overblik over fordelingen af uddannelsesniveau mellem landsdelene.

```{r}
udd_gns_2019 <- udd_landsdele_prop_2019 %>% mutate(gns=ProportionIngen*1+ProportionKort*2+ProportionKort*3+ProportionMellem*4+ProportionLang*5) %>% select(Landsdel, gns)

udd_gns_2019 <- udd_gns_2019[order(-udd_gns_2019$gns),]

head(udd_gns_2019,11)
```

### DATA FOR ANTAL MÆND OG KVINDER I LANDSDELE 

Disse data er også udtrukket fra HFUDD11.

```{r}
køn_landsdele_2019 <- read_excel(path='mændkvinder_landsdele_2019.xlsx')

køn_landsdele_2019 <- køn_landsdele_2019 %>% mutate(PropMænd=Mænd/(Mænd+Kvinder), PropKvinder=Kvinder/(Mænd+Kvinder))

head(køn_landsdele_2019,11)
```

### DATA FOR ALDER FOR FØRSTEGANGSFORÆLDRE I LANDSDELE

Hej

### DATA FOR INDKOMSTNIVEAU I LANDSDELE

Hentet fra INDKP105, inkluderer 15-74 år. 

```{r}
gnsindkomst_landsdele_2019 <- read_excel(path='gns_indkomst_landsdele_2019.xlsx')

gnsindkomst_landsdele_2019 <- gnsindkomst_landsdele_2019[order(-gnsindkomst_landsdele_2019$Gns_indkomst),]

head(gnsindkomst_landsdele_2019,11)
```
Også henter fra INDPK105, men her er det opdelt i indkomstgrupperne for at få overblik over fordelingen.

```{r}
indkomstgrupper_landsdele_2019 <- read_excel(path='indkomstgrupper_landsdele_2019.xlsx')

indkomstgrupper_landsdele_2019 <- cbind(indkomstgrupper_landsdele_2019, Antal = rowSums(indkomstgrupper_landsdele_2019[,2:17]))

indkomstgrupper_landsdele_2019 <- indkomstgrupper_landsdele_2019 %>% mutate(`Under 25.000 kr.`=`Under 25.000 kr.`/Antal, `25.000 - 49.999 kr.`=`25.000 - 49.999 kr.`/Antal, `50.000 - 74.999 kr.`=`50.000 - 74.999 kr.`/Antal, `75.000 - 99.999 kr.`=`75.000 - 99.999 kr.`/Antal, `100.000 - 124.999 kr.`=`100.000 - 124.999 kr.`/Antal, `125.000 - 149.999 kr.`=`125.000 - 149.999 kr.`/Antal, `150.000 - 174.999 kr.`=`150.000 - 174.999 kr.`/Antal,`175.000 - 199.999 kr.`=`175.000 - 199.999 kr.`/Antal, `200.000 - 224.999 kr.`=`200.000 - 224.999 kr.`/Antal, `225.000 - 249.999 kr.`=`225.000 - 249.999 kr.`/Antal, `250.000 - 299.999 kr.`=`250.000 - 299.999 kr.`/Antal, `300.000 - 349.999 kr.`=`300.000 - 349.999 kr.`/Antal, `350.000 - 399.999 kr.`=`350.000 - 399.999 kr.`/Antal, `400.000 - 449.999 kr.`=`400.000 - 449.999 kr.`/Antal, `450.000 - 499.999 kr.`=`450.000 - 499.999 kr.`/Antal,`500.000 kr. og derover`=`500.000 kr. og derover`/Antal)

head(indkomstgrupper_landsdele_2019,11)
```

